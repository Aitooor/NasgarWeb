<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nasgar | News</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="/css/panel.css">
  <link rel="stylesheet" href="/css/sup.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <link rel="shortcut icon" href="/img/logo-128x.png" type="image/x-icon">
  <meta property="og:type" content="website">
  <meta name="theme-color" content="#36A2DF">
  <meta property="og:site_name" content="Nasgar.online">
  <meta name="og:title" content="Nasgar Network!">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="og:icon" content="/img/logo-128x.png">
  <meta name="description" content="description">
  <meta name="og:description" content="description">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
  integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
  crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
  <nav class="nav-container row">
    <div class="col-1"></div>
    <div class="col-5 coll">
      <a href="/"><img src="/img/logo-480x.png" alt="" height="50px"></a>
    </div>
    <div class="col-5 colr">
      <a href="/news" class="nav-btn">Noticias</a>
      <a href="/shop" class="nav-btn">Tienda</a>
      <a href="/bans" class="nav-btn">Baneos</a>
      <a href="https://www.40servidoresmc.es/nasgar-network-votar" class="nav-btn" target="_blank">Votar</a>
      <% if(user) {%>
        <a class="nav-btn" href="/panel"><%- user.username %> </a>
      <% } else { %>
        <a class="nav-btn" href="/login">Login</a>
      <% } %>
    </div>
    <div class="col-1"></div>
  </nav>
  <div class="left-container unactive" id="left-container">
    <div class="leftBTNC">
        <i id="leftBTN" class="fa-solid fa-forward-step"></i>
    </div>
      <% if(user.admin) {%>
        <ul>
          <hr>
          <li><a class="optionTitle1" href="/panel">Inicio</a></li>
          <li><a class="optionTitle1" href="/panel/news">Noticias</a></li>
          <li><a class="optionTitle1" href="/panel/shop">Tienda</a></li>
          <li><a class="option1" href="/panel/shop">Todos los productos</a></li>
          <li><a class="option1" href="/panel/shop/create">Crear producto</a></li>
          <li><a class="optionTitle1" href="/panel/category">Categoría</a></li>
          <li><a class="optionTitle1" href="/panel/timings">StaffTimings</a></li>

          <hr>
        </ul>
        <% } else { %>
          <ul>

          </ul>
          <% } %>

    </div>
    <main>
      <div class="row">
        <% if(type=='main' ){ %>
          <div class="col-12">
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">ID</th>
                  <th scope="col">Nombre</th>
                  <th scope="col">Descripcion</th>
                  <th scope="col">Price (USD)</th>
                  <th scope="col">Comandos</th>
                  <th scope="col">Administrar</th>
                </tr>
              </thead>
              <tbody>
                <% content.forEach(item=>{ %>
                  <tr>
                    <td>
                      <%- item.id %>
                    </td>
                    <td>
                      <%- item.name %>
                    </td>
                    <td>
                      <%- item.description.length < 10 ? item.description : item.description.substring(10) + '...' %>
                    </td>

                    <td>
                      <%- item.price %>
                    </td>
                    <td>
                      <%- item.commands.length %>
                    </td>
                    <td><a href="<%- `/panel/shop/${item.id}` %>" class="btn btn-outline-primary">Administrar</a> </td>
                  </tr>
                  <% }) %>
              </tbody>
            </table>
            <a href="/panel/shop/create" class="btn btn-primary">Crear</a>
          </div>
          <% } else if (type=='create' ){%>
            <div class="col-12">
              <form method="post" action="/panel/shop/create">
                <div class="mb-3">
                  <label for="name" class="form-label">Nombre</label>
                  <input type="text" class="form-control" id="name" name="name">
                </div>
                <% const l =  categories.length >= 3 ? 3 : categories.length %> 

                <% if(categories.length > 0 ){for (let i = 0; i < l ; i++) { %>
                  <div class="mb-3">
                    <select class="form-select form-select-sm" aria-label=".form-select-sm" id="<% "c_"+i %>" name="<% "c_"+i %>">

                      <% if(i == 0){ %>
                        <option value="<% "c_"+i %>" selected>Selecciona una categoría</option>
                      <% } else {%>
                        <option value="<% "c_"+i %>" selected>Selecciona una subcategoría</option>
                      <% } %> 
                      

                      <% categories.forEach(c=> { %>
                        <option value=<%-c.name %> >
                          <%- c.name %>
                        </option>
                        <% }); %>

                    </select>
                  </div>
                  
                <% }} %> 

                <div class="mb-3">
                  <label for="price" class="form-label">Precio</label>
                  <input type="number" class="form-control" id="price" name="price">
                </div>
                <div class="mb-3">
                  <label for="type" class="form-label">URL de la imagen</label>
                  <input type="text" class="form-control" id="type" name="image">
                </div>
                <div class="mb-3">
                  <label for="description" class="form-label">Descripción</label>
                  <input type="text" class="form-control" id="description" name="description">
                </div>
                <div class="mb-3">
                  <label for="description" class="form-label">Nombre del server</label>
                  <input type="text" class="form-control" id="server" name="server">
                </div>
                <div class="mb-3">
                  <label for="commands" class="form-label">Comandos (Separados por comas)</label>
                  <input type="text" class="form-control" id="commands" name="commands">
                </div>

                <button type="submit" class="btn btn-primary">Crear</button>
              </form>
            </div>
            <% } else if (type=='manage' ){%>
              <div class="col-12">
                <form method="post" action="/panel/shop/<%- content.id %>">
                  <fieldset>
                    <div class="mb-3">
                      <label for="name" class="form-label">Nombre</label>
                      <input type="text" class="form-control" id="name" name="name">
                    </div>

                    <% const l =  categories.length >= 3 ? 3 : categories.length %> 

                    <% if(categories.length > 0 ){for (let i = 0; i < l ; i++) { %>
                      <div class="mb-3">
                        <select class="form-select form-select-sm" aria-label=".form-select-sm" id="<%- "c_"+i %>" name="<%- "c_"+i %>">

                          <% if(i == 0){ %>
                            <option value="<% "c_"+i %>" selected>Selecciona una categoría</option>
                          <% } else {%>
                            <option value="<% "c_"+i %>" selected>Selecciona una subcategoría</option>
                          <% } %> 
                          
  
                          <% categories.forEach(c=> { %>
                            <option value=<%-c.name %> >
                              <%- c.name %>
                            </option>
                            <% }); %>
  
                        </select>
                      </div>
                      
                    <% }} %> 

                    <div class="mb-3">
                      <label for="price" class="form-label">Precio</label>
                      <input type="number" class="form-control" id="price" name="price">
                    </div>
                    <div class="mb-3">
                      <label for="type" class="form-label">URL de la imagen</label>
                      <input type="text" class="form-control" id="type" name="image">
                    </div>
                    <div class="mb-3">
                      <label for="description" class="form-label">Descripción</label>
                      <input type="text" class="form-control" id="description" name="description">
                    </div>
                    <div class="mb-3">
                      <label for="commands" class="form-label">Comandos (Separados por comas)</label>
                      <input type="text" class="form-control" id="commands" name="commands">
                    </div>

                    <button type="submit" class="btn btn-primary">Editar</button>
                    <a href="/panel/shop/<%- content.id %>/clone" class="btn btn-primary">Clonar</a>
                    <a href="/panel/shop/<%- content.id %>/delete" class="btn btn-danger">Eliminar</a>
                  </fieldset>
                </form>
              </div>

              <% } %>
      </div>
      <div class="separator"></div>
    </main>
    <script>
      const leftBTN = document.getElementById("leftBTN")
const left = document.getElementById("left-container")
left.addEventListener('click', () => {
    console.log('a')
    if (left.classList.contains('active')) left.classList.replace('active', 'unactive')
    else left.classList.replace('unactive', 'active')
})
</script>
</body>

</html>